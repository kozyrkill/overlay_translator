# Overlay Translator

Утилита для автоматического перевода текста с экрана с overlay отображением результатов.

## Особенности

- **OCR распознавание текста** с экрана
- **Автоматический перевод** через Ollama или Google Translate
- **Overlay отображение** результатов перевода
- **Кэширование переводов** для экономии запросов
- **Управление overlay для скриншотов** - возможность временно скрывать надписи

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/kozyrkill/overlay_translator.git
cd overlay_translator
```

2. Установите зависимости:
```bash
./setup.sh
```

3. Активируйте виртуальное окружение:
```bash
source venv/bin/activate
```

## Запуск

```bash
./start.sh
```

Или напрямую:
```bash
python3 main.py
```

## Использование

### Основные функции

1. **Выбор окна** - кликните "Выбрать окно" и выберите окно для перевода
2. **Запуск автоперевода** - нажмите "Старт" для включения автоматического перевода
3. **Настройка прозрачности** - используйте слайдер для изменения прозрачности overlay
4. **Режимы отображения** - переключайтесь между компактным и расширенным видом

### Управление overlay для скриншотов

**Важная новая функция!** Теперь вы можете создавать скриншоты без overlay надписей:

#### Автоматический режим
- Нажмите кнопку **"Скриншот без overlay"**
- Overlay автоматически скроются на 5 секунд
- Создайте скриншот в течение этого времени
- Overlay автоматически восстановятся

#### Ручной режим
- Нажмите **"Скрыть overlay"** для скрытия всех надписей
- Создайте скриншот вручную
- Нажмите **"Показать overlay"** для восстановления

#### Горячие клавиши
- `Ctrl+Q` - выход из приложения
- `Escape` - выход из приложения

## Структура проекта

```
overlay_translator/
├── main.py                 # Основной файл приложения
├── ocr_engine.py          # Движок OCR распознавания
├── translation_engine.py   # Движок перевода
├── overlay_manager.py      # Менеджер overlay окон
├── screenshot_helper.py    # Вспомогательные функции для скриншотов
├── requirements.txt        # Зависимости Python
├── setup.sh               # Скрипт установки
├── start.sh               # Скрипт запуска
└── README.md              # Этот файл
```

## Зависимости

- Python 3.8+
- GTK3
- Tesseract OCR
- xdotool
- xprop

## Настройка

### Интервал обновления
Установите желаемый интервал обновления перевода (в секундах) в интерфейсе.

### Переводчик
Выберите предпочитаемый сервис перевода:
- **Ollama** - локальный перевод (требует установки Ollama)
- **Google Translate** - онлайн перевод

### Прозрачность overlay
Настройте прозрачность overlay надписей от 10% до 100%.

## Решение проблем

### Overlay не отображаются
- Проверьте, что выбранное окно активно
- Убедитесь, что автоперевод включен
- Проверьте настройки прозрачности

### Ошибки OCR
- Убедитесь, что Tesseract установлен
- Проверьте, что в выбранном окне есть текст
- Попробуйте увеличить интервал обновления

### Проблемы с переводом
- Проверьте интернет-соединение (для Google Translate)
- Убедитесь, что Ollama запущен (для Ollama)
- Проверьте кэш переводов

## Разработка

### Добавление новых функций
1. Создайте новый модуль в отдельном файле
2. Импортируйте его в `main.py`
3. Добавьте соответствующие элементы интерфейса
4. Обновите документацию

### Тестирование
```bash
python3 -m py_compile *.py  # Проверка синтаксиса
python3 main.py             # Запуск приложения
```

## Лицензия

Этот проект распространяется под лицензией MIT.

## Автор

Разработано для удобного перевода текста с экрана с возможностью создания чистых скриншотов.
